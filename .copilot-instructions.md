# ðŸŒ³ Project: Orchard Manager App - Architectuur en Standaarden

Dit bestand dient als de primaire instructiebron voor GitHub Copilot om code te genereren die consistent is met de afgesproken architectuur en best practices.

## 1. Project Overzicht & Algemene Regels

| Categorie | Standaard |
| :--- | :--- |
| **Doel** | Beheer en exploratie van boomgaarden. |
| **Code Stijl** | Gebruik **ES6+ syntax** (arrow functions, `const`/`let`). |
| **Taalvoorkeur** | Nederlands in opmerkingen en documentatie (tenzij technische term). |
| **Foutafhandeling** | Altijd robuuste `try...catch`-blokken in asynchrone functies, met duidelijke logging. |
| **Terminologie** | Gebruik consistent de termen uit Sectie 5. |

---

## 2. Front-end Architectuur (Vue.js 3 - Composition API)

De front-end is gebaseerd op Vue.js en volgt het **Container/Presenter** patroon om 'bloat' te voorkomen.

### 2.1 Component Verantwoordelijkheden (Anti-Bloat Regels)

| Component Type | Verantwoordelijkheid | Regels |
| :--- | :--- | :--- |
| **View Component** (e.g., `OrchardTablePage.vue`) | Data, State & Controller Logica. | Gebruik de **`<script setup>`** syntax. Mag **wÃ©l** Composition API functies (`ref`, `reactive`, `onMounted`, etc.) en **Composables** (`use...`) gebruiken. Bevat minimale logica voor Laden/Fout/Lege staat. |
| **Presentational Component** (e.g., `OrchardTableRow.vue`) | Uitsluitend Presentatie (View). | Ontvangt **ALLE** data en handlers via **`defineProps`**. Mag **GEEN** state-logica (`ref`, `reactive`, `onMounted`) voor data-fetching bevatten. Moet 'dom' zijn. |
| **Composables** (e.g., `useOrchardData.js`) | Complexe logica, sortering, filtering, Supabase-calls. | Moet logica isoleren en herbruikbare state (`ref` of `reactive`) en functies retourneren. |

### 2.2 UI/Styling Voorkeuren

| Component | Implementatie Standaard |
| :--- | :--- |
| **Componenten Stijl** | Gebruik **Single File Components (SFC's)** met `<template>`, `<script setup>` en `<style scoped>`. |
| **Lay-out** | Gebruik **Tailwind CSS**-klassen in de `<template>` voor lay-out, spacing en flex/grid. |
| **UI Elementen** | Gebruik **Quasar Framework** componenten (bijv. QBtn, QTable, QInput) voor alle interactieve, kant-en-klare UI-elementen. |
| **Kaartweergave** | Gebruik de **`vue-leaflet`** (of vergelijkbare) bibliotheek voor alle kaartgerelateerde componenten. |

---

## 3. Back-end Architectuur (Supabase)

De back-end is een Serverless oplossing. Een traditionele Express.js-server is **niet nodig** voor data-operaties.

| Laag | Implementatie Standaard |
| :--- | :--- |
| **Database & API** | **Supabase PostgreSQL** en de automatisch gegenereerde **PostgREST API**. |
| **Data Interagie** | Gebruik uitsluitend de **Supabase JavaScript Client SDK** voor alle data- en auth-interacties vanuit de front-end. |
| **Beveiliging** | De front-end is afhankelijk van **Row Level Security (RLS)** in de database om toegangsrechten af te dwingen. |
| **Complexe Logica** | Voor server-side taken, zoals API-integraties of gevoelige berekeningen, moeten **Supabase Edge Functions** worden gebruikt. |

---

## 4. Rollen en Autorisatie

Autorisatie moet altijd worden gecontroleerd door de rol van de gebruiker.

| Rol | Verantwoordelijkheid |
| :--- | :--- |
| **Owner** | Beheer van eigen Boomgaarden. Volledige CRUD-toegang tot eigen data. |
| **SpeciesManager** | Beheer van de centrale Boomsoorten-tabel. CRUD-toegang tot de `TreeSpecies`-tabel. |
| **Public/Guest** | Leestoegang (`SELECT`) tot Boomgaarden en Bomen die als `is_public=true` zijn gemarkeerd. |

---

## 5. Terminologie Woordenboek

Gebruik deze Engelse termen consequent in variabele-, functie- en bestandsnamen:

| Nederlands | Engels |
| :--- | :--- |
| Boomgaard | `Orchard` |
| Boomsoort | `TreeSpecies` |
| Oogstseizoen | `harvestSeason` |
| Eigenaar | `owner` (objectveld) of `Owner` (rol) |